<!DOCTYPE html>
<html>

<head>
    <title>FIT3179 Assignment 2</title>
    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
    <!-- Import vega-embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
        integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700;900&display=swap"
        rel="stylesheet">

    <!-- custom style -->
    <style>
        * {
            font-family: 'Georgia', sans-serif;
        }

        h1 {
            font-weight: 900;
        }

        body {
            background-color: lightgray;
        }

        .page {
            width: 1000px;
            background-color: white;
            margin: auto;
            padding: 50px;
            padding-top: 35px;
        }

        .vis-container {
            width: 100%;
        }

        .description h2,
        h1 {
            margin-top: 0px;
        }

        .description-right {
            padding-left: 20px;
        }

        .description-left {
            padding-right: 20px;
        }

        .pure-g {
            margin-bottom: 10px;
        }

        .small-font {
            font-size: 14px;
        }

    </style>
</head>

<body>

    <div class="page">

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-2-24">
            </div>
            <div class="pure-u-20-24">
                <h1 style="text-align:center">The Market at a glance</h1>
                <h2 style="text-align:center">Visualising the US financial market through the SP500 index</h2>
                <p>
                    The S&P 500 index, or simply called the "SP500", measures the performance of 500 large
                    companies listed on stock exchanges in the United States. The S&P index is founded in 
                    1957, 63 years ago. It has a total market capitalisation of 30 trillion USD and comprises
                    of familiar companies we have heard about, such as Apple, Amazon, Miscrosoft and more.
                </p>
                <p>
                    Over the past 60 years, the SP500 has be on a steady increase. But the market is not without 
                    its risks. The visualisation below shows the performance of the SP500 in the past 25 years, 
                    from 1995 to 2020, with monthly data. There are three major market downturns which occured 
                    in these years. In their chronological order, these events are: the Dot-com bubble, the 
                    global financial crisis and the most recent Coronavirus Crash.
                </p>
            </div>
            <div class="pure-u-2-24">
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-1-1">
                <div id="spxLine" class="vis-container" style="text-align:center"></div>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-1-3">
                <div id="spxDotcom" class="vis-container", style="float: left; text-align: left;"></div>
                <h2 style="text-align:left">The Dot-com bubble</h2>
                <p style="padding-right: 20px">
                    The <b><span style="color: #8B0000;">Dot-com bubble</span></b> occured in late 90s to the early 2000s was caused by the 
                    excessive speculation of internet-related companies, where investors vastly 
                    overvalued them even when rarely any of them reported any actual profit. 
                </p>
            </div>
            <div class="pure-u-1-3">
                <div id="spxGfc" class="vis-container", style="float: left; text-align: left;"></div>
                <h2 style="text-align:left">The GFC</h2>
                <p style="padding-right: 20px">
                    The <b><span style="color: #8B0000;">Global Financial Crisis (GFC)</span></b> caused the crash of many global markets around 2008. 
                    It is said to be caused by the excessive risk taking behaviours by investment banks. 
                    One of the most notable event was the bankruptcy of Lehman Brothers due to the collapse
                    of the US housing bubble. 
                </p>
            </div>
            <div class="pure-u-1-3">
                <div id="spxCovid" class="vis-container", style="float: left; text-align: left;"></div>
                <h2 style="text-align:left">The Coronavirus Crash</h2>
                <p style="padding-right: 20px">
                    The <b><span style="color: #8B0000;">Coronavirus Crash</span></b> occured around from Feburary, 
                    2020 and is one of the fastest, most devastating crashes since the Great Depression. However, 
                    this crash had a quick recovery which ended in April, 2020. 
                </p>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">

            <div class="pure-u-2-24">
            </div>
            <div class="pure-u-20-24">
                <h2 style="text-align:center">A close look to the companies: who are where</h2>
            </div>
            <div class="pure-u-2-24">
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-1-1">
                <div id="map" class="vis-container" style="text-align:center"></div>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-4-5">
                <div id="pieSector" class="vis-container" style="text-align:center"></div>
            </div>
            <div class="pure-u-1-5">
                <h2>What about each sectors?</h2>
                <p>
                    The bars on the right shows the market capitalisation of <b><span style="color: pink;">Information 
                    Technology companies exceeds 8 trillion USD</span></b> in the SP500 and is the largest sector in the 
                    SP500. The pie chart on the left shows the amount of companies in each sector across the 500 companies in
                    the S&P Index.
                </p>
            </div>
            
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-2-24">
            </div>
            <div class="pure-u-20-24">
                <h2 style="text-align:center">
                    Who really owns the market?
                </h2>
                <p>
                    This figure below shows the <b>largest 10 companies</b> (Company name: symbol) 
                    in the SP500 by their market capitalisation, with the largest company being Apple.
                    In the figure, each dollar bill, ðŸ’µ, represents 100 billion USD. 
                </p>
            </div>
            <div class="pure-u-2-24">
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-1-1">
                <div id="custom" class="vis-container" style="text-align:center"></div>
            </div>
        </div>
        <!-- end pure grid group -->

    </div> <!-- end page -->

    <script type="text/javascript">

        const map = "a2/us-map.vl.json";
        const spxLine = "a2/spx-line.vl.json";
        const spxCovid = "a2/spx-covid.vl.json"; 
        const spxDotcom = "a2/spx-dotcom.vl.json";
        const spxGfc = "a2/spx-gfc.vl.json";
        const barMarketCap = "a2/us-bar-marketcap.vl.json";
        const barSector = "a2/us-bar-sector.vl.json";
        const custom = "a2/marketcap-custom.vl.json";
        const pieSector = "a2/us-pie.vl.json";

        let filenames = [map, spxLine, spxCovid, spxDotcom, spxGfc, barMarketCap, barSector, custom, pieSector] 
        let scriptnames = ["#map", "#spxLine", "#spxCovid", "#spxDotcom", "#spxGfc", "#barMarketCap", "#barSector", "#custom", "#pieSector"]

        let i = 0 
        while (i < filenames.length) {
            vegaEmbed(scriptnames[i], filenames[i], { "actions": false }).then(function (result) {
                // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            }).catch(console.error);
            i++;
        }

    </script>
</body>

</html>

